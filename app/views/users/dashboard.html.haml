= render 'layouts/top'
= render 'layouts/header'

.container
  .headline
    %h2 Mapa Prácticas Ágiles
  %table.table.table-bordered.table-striped#sortable{:data => { update_url: user_practicas_sort_path, range_url:user_practicas_range_path, comment_url: user_practicas_comment_path }}
    %thead
      %tr
        %th Número
        %th Nombre
        %th Método Ágil
        %th Esfuerzo
        %th Margen
        %th Notas
    %tbody
      - @practicas.each do |practica|
        %tr{data: {item_id: "#{practica.id}"}, class: 'item'}
          %td= practica.legacy_position
          %td= practica.name
          %td= practica.agile_method
          -# http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/collection_select
          %td= practica.effort
          -#%td=collection_select(:practica, :effort, UserPractica::ESFUERZO, :first, :last, :prompt => true)
          %td= select_tag('name', options_from_collection_for_select(UserPractica::MARGEN, :first, :last, practica.range),prompt: "--", class: 'range form-control')
          %td= text_area_tag 'bio', practica.comment, class: 'comment form-control'

:javascript
  $(document).ready( function() {
      App.sort();
      App.updateRange();
      App.updateComment();
  } );